@{
    ViewData["Title"] = "Register";
}
<h1 class="display-4">Enter information to create a new Account</h1>

<form>
    <label for="username">Username:</label>
    <input id="username" name="username" />
    <br>
    <label for="password">Password:</label>
    <input id="password" type="password" name="password" />
    <br>
    <label for="nume">Nume:</label>
    <input id="nume" name="nume" />
    <br>
    <label for="Prenume">Prenume:</label>
    <input id="prenume" name="prenume" />
    <br>
    <label for="eMail">e-mail:</label>
    <input id="eMail" name="eMail" />
    <br>
    <select name="rol" id="rol">
        <option value="STUDENT">Student</option>
        <option value="PROFESOR">Profesor</option>
    </select>
    <button id="register-btn">Register!</button>
</form>

<script>
    var btn = document.querySelector("#register-btn");
    btn.addEventListener("click", async e => {
        e.preventDefault();
        var uname = document.querySelector("#username").value;
        var pass = document.querySelector("#password").value;
        var name = document.querySelector("#nume").value;
        var fname = document.querySelector("#prenume").value;
        var eMail = document.querySelector("#eMail").value;
        var rol = document.querySelector("#rol").value;
        console.log(`${uname} cu parola ${pass}`)

        var res = await fetch('/Register/RegisterUser', {
            method: "POST",
            headers: { 'Accept': 'application/json', 'Content-Type': 'application/json' },
            body: JSON.stringify({
                username: uname,
                password: pass,
                nume: name,
                prenume: fname,
                eMail: eMail,
                rol: rol
            })
        });

        var obj = await res.json();

        console.log(obj);
    })
</script>

